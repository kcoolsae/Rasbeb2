Task format
====
Tasks are stored on the server as HTML pages in folders, one folder for each language version of each task, and another
for the corresponding 'feedback' pages (correct answer, explanation, this is informatics, etc.)

Folders are organised as follows:
* The base URL of the folders is taken from `rasbeb2.questions-url` property in the configuration file.
* Within that base folder, there are two subfolders for each task: one for the task itself, and one for the feedback pages. 
Their names are randomly generated when the task is first added to
the database and are stored as columns `question_magic_q` and `question_magic_f` in the `questions` table.
* Within each of these subfolders, there is a folder for each language version of the task. The name of the folder is the
two character language code

The Bebras system opens the file `index.html` of the corresponding folder and displays it in an internal frame.
User interface elements (text fields, buttons, etc.) are generated by the system and are *not* part of the HTML file.

When the internal frame is first displayed, the system posts several messages
to the task page.

* A message `sizing: …` to which the task page must respond with the natural
dimensions of that page. This is most easily done by including the JavaScript page
`iframesize.js` (see `itasks` folder) as the last line in the header of the task page.
  (That line can be automatically included by the upload script.)

This message is sent for both the question and the feedback pages. For a question page, and only when
the question is shown as part of a competition - and not when viewed by the teacher, or when viewed after
the competition is closed - also the following message is sent:

* A message `init:…` containing the following information
about the current participation
  * `id` of the user viewing the task
  * `task` Bebras-id of the task being viewed
  * `answer` The answer string  as stored in the database. Empty if no answer
    to this question was already given by the user

This information is primarily of use to interactive tasks.
It can for instance be used to restore the task page to the state it was in when the user last viewed it.
ID and task number can be used by (interactive) tasks as keys into local storage.

### Interactive tasks of type 'JSON'

For interactive tasks of type 'JSON' further communication is needed between internal frame and the enclosing page (generated by the server).
* When the user presses the submit button, a message `getAnswer` is sent to the task page.
* The task page must answer this with a message `answer:…` containing the answer
string to be stored in the database.

The Javascript page `itasks-v1.js` (from the `itasks` folder) can be included in the header of the task page to handle this communication.