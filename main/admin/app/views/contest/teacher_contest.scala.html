@* teacher_contest.scala.html
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 * Copyright Â© 2023-2024 Kris Coolsaet (Universiteit Gent)
 *
 * This software is distributed under the MIT License - see files LICENSE and AUTHORS
 * in the top level project directory.
 *@

@import _root_.be.ugent.rasbeb2.db.dto.{ContestWithAgeGroup, Question}
@import views.html.be.ugent.caagt.play.ext.i18n
@(contest: ContestWithAgeGroup, lang: String, questions: List[Question], pos: Int)(implicit deputy: Deputy)

@* TODO does not need the full list of questions as an argument? *@

@defining(questions.get(pos)) { q: Question =>
    @layout.teacher("conq", css = include.js("iframeresize")) { @* css is a hack to ensure early loading of the script *@
        <div class="d-flex mt-2">
            <div class="flex-grow-0 me-2 align-content-center">
                <h3>@contest.contestTitle</h3>
                <p>@contest.ageGroupName - @contest.ageGroupDescription</p>
                <div class="mb-2">
                    <a class="btn btn-outline-secondary" href="@controllers.contest.routes.TeacherContestController.listContests(contest.ageGroupId)">@i18n("common.caption.back")</a>
               </div>
                <div class="list-group">
                    @foreach(questions) { question: Question =>
                        <a class="list-group-item list-group-item-action @(if(question.id == q.id) "active" else "")" href="@controllers.contest.routes.TeacherContestController.getContestQuestion(contest.contestId, contest.ageGroupId, question.id)">@question.header.title</a>
                    }
                </div>
            </div>
            <div class="flex-fill ms-2">
                <div class="row align-items-start">
                    <div class="col-auto">
                        <h3>@q.header.title</h3>
                    </div>
                </div>
                @defining(deputy.getConfig().getString("rasbeb2.questions-url")) { url =>
                    <iframe style="width: 100%" id="iframeQ" src="@url/@q.magicQ/@lang/index.html" onload='postSize(this.id);'></iframe> @* filled in by JS-script *@
                }
                @* TODO also show feedback page *@
            </div>
        </div>
    }
}

